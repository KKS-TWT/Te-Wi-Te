# 단위 및 통합 테스트 리팩토링 개요

## 단위 테스트 및 통합 테스트 리팩토링의 필요성

1. 기존에 도입한 헥사고날 아키텍처가 프로젝트 규모에 비해 너무 복잡하다.

   - 필요하지 않은 Service 인터페이스
   - 너무 복잡한 테스트용 Fake 객체들

2. 복잡한 클래스 구조에 따라 가독성이 떨어진다.

3. 도메인에는 단위 테스트가 필요하지만 서비스에 대해 단위 테스트가 필요하지 않다고 판단함.

<br>

## 작업 목표

1. 도메인 로직과 영속성 기술에 대한 의존성을 분리하면서 프로젝트 규모에 맞게 수정

   - 그러나 헥사고날 아키텍처와 일부 맞지 않을 수 있지만 타협점을 찾아야 함

<br>

## 리팩토링 상세 내용

1. 인터페이스로 사용하던 서비스를 클래스를 사용하도록 전환

2. 1번 내용 수정에 따른 테스트 코드 수정

3. 목적에 맞지 않는 불필요한 단위테스트 삭제

   - 서비스 클래스에 대한 단위 테스트 등

4. 통합 테스트 시 다음과 같이 진행

   - 프로젝트 외부에 위치한 의존성은 Mocking하여 사용

     - @MockBean을 선언 후 각 테스트 메서드에서 필요한 값을 반환하도록 Mocking 한다.

   - 프로젝트 내부에 위치한 의존성은 실제 Bean으로 테스트 진행

   - 단, 컨트롤러 테스트 시 @WebMvcTest를 사용하므로 스프링 컨테이너 로딩을 위한 Bean은 @Import를 사용하여 주입

   - @Import로 주입한 빈은 실제로 사용하지는 않으므로, Mocking 하지 않고 실제 Bean을 사용한다.
